---
title: Tokens in agent IDs
description: Learn about tokens in the agentic identity platform, including token types, claims structure, authentication flows, and how tokens enable secure communication between agentic applications and resources.
author: SHERMANOUKO
ms.author: shermanouko
ms.service: entra-id
ms.topic: concept-article
ms.date: 11/04/2025
ms.reviewer: jmprieur

#customer-intent: As a developer working with agentic applications, I want to understand how tokens work in the agentic identity platform, so that I can properly implement authentication, authorization, and security patterns in my agentic solutions.
---

# Tokens in agent IDs

Tokens are the fundamental security mechanism that enables secure communication and authorization in the agentic identity platform. This article explains how tokens work in agentic scenarios.

In agentic scenarios, tokens carry enhanced claims to support the unique requirements of agentic applications. Unlike nonagentic application tokens, agentic tokens include specialized claims that identify entity types, delegation relationships, and authorization contexts specific to agentic operations.

These tokens enable secure communication between:

- Agentic applications and their instances
- Agent instances and resource APIs
- Agentic users and the services they interact with
- Complex delegation chains involving multiple agentic entities

## Token claims entity identifiers

Agentic tokens include specialized claims that identify the type and role of entities participating in authentication flows:

- Actor Facet Claims (xms_act_fct): Identify the entity performing actions within the token flow. These claims enable systems to understand who is actually requesting access or performing operations.

- Subject Facet Claims (xms_sub_fct): Identify the ultimate subject for whom operations are being performed. It enables proper attribution even in complex delegation scenarios.

- Identity Type Claims (idtyp): Distinguish between user and application contexts, enabling appropriate policy application and security enforcement.

- Identity Relationship Claims (xms_idrel): Describe the relationship between the token subject and the resource tenant, supporting multi-tenancy and guest access scenarios.

## Token flow patterns

Agentic applications participate in several distinct token flow patterns, each designed for specific operational scenarios.

### Tokens in user delegation scenarios

User delegation scenarios enable agentic applications to operate on behalf of users while maintaining clear attribution and security boundaries. In this scenario, tokens preserve user identity while identifying the agent ID blueprint as the acting entity.

The OBO protocol requires token audience to match the client ID. However, for Agent Identity (Agent ID), the incoming token has the audience of the agentic application.  

In this scenario, tokens have the following key characteristics:

- Maintain user identity context throughout operations
- Include delegated permissions granted to the agent ID blueprint
- Enable policy evaluation at both user and application levels
- Support both interactive and background operations

Policies are evaluated at both agent identity blueprint (agent ID blueprint) and agent identity (agent ID) levels. When the agent ID is used as a resource, policies apply at the agent ID level and agent ID blueprint level. For client scenarios, both agent ID blueprint and agent ID policies are considered for consent, Conditional Access (CA), and Continuous Access Evaluation (CAE).

The agent ID receives delegated permissions that can be directly assigned or inherited from the parent agent ID blueprint when impersonation is used.

### Tokens in application-only scenarios

Application-only scenarios represent autonomous operations where agentic applications act on their own behalf without user context.

In this scenario, tokens have the following key characteristics:

- Represent the agentic application's own identity
- Include application-level permissions directly assigned by the tenant administrator
- Enable unscoped access within granted permission boundaries. Delegated permissions assigned to apps or instances aren't applied.
- Support fully autonomous background operations

App-only tokens for agent IDs are unscoped, meaning they represent the full permissions granted to the agent ID rather than a subset. It provides maximum flexibility for autonomous operations while requiring careful permission management.

### Tokens in agent user impersonation scenarios

Agent user impersonation scenarios enable agentic applications to operate with specialized agent user identities. These tokens support scenarios where agents need user-like context but with controlled, predefined identities.

In this scenario, tokens have the following key characteristics:

- Use specialized agent user identities
- Maintain user-context behavior patterns
- Include scoped delegated permissions
- Require explicit assignment to agent ID blueprints

In this scenario, the agent ID blueprint impersonates the agent ID, which then impersonates the assigned agent user. The same agent ID blueprint client ID is required for both phases to prevent privilege escalation.

Access is scoped to delegated permissions assigned to the Agent Identity (Agent ID), ensuring the agent can't exceed its granted permissions even when operating with user context. Agent users can only be used when assigned to an Agent Identity (Agent ID) and can't authenticate independently.

## Nonagentic API integration

Nonagentic applications can expose APIs that call downstream resources using OBO patterns. In such cases, token claims reflect that a subject of an OBO exchange is agentic. 

For agent ID subjects, it's indicated by the claim `xms_sub_fct` with the value `11`. For agent user subjects, it's indicated by the claim `xms_sub_fct` with the value `13`. Both agentic and nonagentic OBO clients carry forward subject facets. It enables resource servers to apply appropriate policies and logging for agentic subjects. It also enables proper attribution even when tokens pass through nonagentic intermediaries.

## Builder application claims

Agent builders don't receive special token claims. They aren't identified in tokens issued to agent ID blueprint or agent ID, even when the builder provides the credential for the agentic ID blueprint. Builder applications use standard token claims appropriate for their authentication method and don't participate in the specialized agentic claim structure.

## Tenancy models and token behavior

All tokens contain a tenant ID (`tid`) representing the organization's tenant. Tokens are bounded within the tenant of the agent ID. Each agent ID receives tokens scoped to its operational tenant. Agent IDs can't access resources outside their assigned customer tenant. Permission inheritance flows directly from parent to child entities.

Multitenant agent ID blueprints can create agent IDs across multiple customer tenants. Parent agent ID blueprints might exist in a different (publisher) tenant. Each customer tenant maintains independent consent and permission grants

Cross-tenant operations require separate agent ID instances per tenant. Audit logs are generated in each relevant tenant with proper tenant attribution.

## Token inheritance and forwarding

When tokens flow through multiple delegation levels in complex agentic scenarios, specific claims are carefully preserved and transformed to maintain proper attribution and security context. Claim propagation ensures that:

- No privilege escalation occurs between delegation levels
- Each entity in the chain operates within its granted permission scope
- Audit trails maintain clear attribution for all operations
- Tenant boundaries are respected throughout the delegation process

Agent builders provide a mechanism for runtime credential provisioning while maintaining security isolation in the final operational tokens. Builders can provide runtime credentials for agent ID blueprint authentication. Builder identity isn't propagated to tokens issued to agent ID blueprints or agent IDs. Credential handoff occurs without exposing builder identity in downstream tokens.

## Token validation

Clients using agent ID are expected to treat the access tokens issued to them to use at resource servers as opaque, and not try to parse them. However, resource servers that receive access tokens issued to agents need to parse the tokens to validate them and extract claims for authorization purposes.

Resource servers should validate agentic tokens by:

- Verifying standard OAuth claims (aud, exp, iss)
- Checking agentic facet claims for proper entity identification
- Validating permissions based on token type (delegated vs app-only)
- Ensuring tenant boundary compliance

Token claims enable policy engines to:

- Identify agentic vs nonagentic clients
- Distinguish between different agentic scenarios
- Apply appropriate conditional access policies
- Generate accurate audit logs

## Audit and logging integration

Token claims provide the foundation for comprehensive audit trails:

- `azp` identifies the requesting agent ID for client attribution
- `oid` identifies the subject for resource access attribution
- `xms_act_fct` and `xms_sub_fct` enable detailed flow analysis
- `tid` ensures proper tenant context in logs